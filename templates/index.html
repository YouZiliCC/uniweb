{% extends "base.html" %}
{% block title %}首页 - 数据库系统课程大作业展示平台{% endblock %}
{% block content %}
    <!-- Hero Section with Gradient Background -->
    <div class="relative overflow-hidden">
        <!-- Background -->
        <div class="absolute inset-0 bg-gradient-to-br from-primary-600 via-primary-700 to-amber-800 dark:from-gray-900 dark:via-primary-900 dark:to-gray-900"></div>
        
        <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 lg:py-32">
            <div class="text-center">
                <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold text-white tracking-tight">
                    <span class="block">探索学生创意</span>
                    <span class="block mt-2 bg-clip-text text-transparent bg-gradient-to-r from-primary-200 to-white">发现优秀作品</span>
                </h1>
                <p class="mt-6 max-w-2xl mx-auto text-lg sm:text-xl text-primary-100 dark:text-gray-300">
                    数据库系统课程大作业展示平台 — 浏览、部署、分享你的 WebApp 项目
                </p>
                <div class="mt-10 flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="/project" class="inline-flex items-center justify-center px-8 py-4 text-lg font-semibold rounded-xl text-primary-700 bg-white hover:bg-gray-100 shadow-lg hover:shadow-xl transition-all duration-200">
                        浏览全部项目
                    </a>
                    {% if not current_user.is_authenticated %}
                    <a href="/auth/register" class="inline-flex items-center justify-center px-8 py-4 text-lg font-semibold rounded-xl text-white border-2 border-white/30 hover:bg-white/10 backdrop-blur transition-all duration-200">
                        立即注册
                    </a>
                    {% endif %}
                </div>
                
                <!-- Stats -->
                <div class="mt-16 grid grid-cols-3 gap-8 max-w-lg mx-auto">
                    <div class="text-center">
                        <div class="text-3xl sm:text-4xl font-bold text-white">{{ total_projects }}</div>
                        <div class="mt-1 text-sm text-primary-200">个项目</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl sm:text-4xl font-bold text-white"><i class="fa-brands fa-docker"></i></div>
                        <div class="mt-1 text-sm text-primary-200">容器部署</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl sm:text-4xl font-bold text-white"><i class="fa-solid fa-terminal"></i></div>
                        <div class="mt-1 text-sm text-primary-200">在线终端</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Wave Divider -->
        <div class="absolute bottom-0 left-0 right-0">
            <svg viewBox="0 0 1440 120" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full h-auto">
                <path d="M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z" class="fill-gray-50 dark:fill-gray-900"/>
            </svg>
        </div>
    </div>

    <!-- Featured Projects Section -->
    {% if featured_projects %}
    <div class="bg-gray-50 dark:bg-gray-900 py-16 lg:py-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="mt-4 text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white">
                    精选项目
                </h2>
                <p class="mt-3 text-lg text-gray-500 dark:text-gray-400">
                    发现最受欢迎的学生作品
                </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {% for project in featured_projects %}
                <div class="group bg-white dark:bg-gray-800 rounded-2xl shadow-sm hover:shadow-xl overflow-hidden transition-shadow duration-300">
                    <!-- Project Image -->
                    <div class="relative h-48 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 overflow-hidden">
                        {% set project_img = '/static/img/projects/' + project.pid + '.png' %}
                        <img src="{{ project_img }}" 
                             alt="{{ project.pname }}" 
                             class="w-full h-full object-cover"
                             onerror="this.src='/static/img/project.png';">
                        <!-- Star Badge -->
                        <div class="absolute top-3 right-3">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-400/90 text-yellow-900 shadow-sm backdrop-blur-sm">
                                <i class="fa-solid fa-star mr-1.5"></i> {{ project.stars|length if project.stars else 0 }}
                            </span>
                        </div>
                    </div>
                    
                    <!-- Project Info -->
                    <div class="p-5">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2 line-clamp-1">
                            <a href="{{ url_for('project.project_detail', pid=project.pid) }}" class="hover:text-primary-600 dark:hover:text-primary-400 transition-colors">
                                {{ project.pname }}
                            </a>
                        </h3>
                        
                        <p class="text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mb-4 min-h-[2.5rem]">
                            {{ project.pinfo[:80] + '...' if project.pinfo and project.pinfo|length > 80 else (project.pinfo or '暂无描述') }}
                        </p>
                        
                        <div class="flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-700">
                            <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                                <i class="fa-solid fa-users mr-1.5 text-primary-500"></i>
                                <a href="{{ url_for('group.group_detail', gid=project.gid) }}" class="hover:text-primary-600 dark:hover:text-primary-400">
                                    {{ project.group.gname }}
                                </a>
                            </div>
                            <div class="flex items-center gap-3">
                                {% if project.port %}
                                <a href="{{ external_url }}:{{ project.port }}" target="_blank" 
                                   class="text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400">
                                    访问应用
                                </a>
                                {% endif %}
                                <a href="{{ url_for('project.project_detail', pid=project.pid) }}" 
                                   class="text-sm font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300">
                                    项目详情
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <!-- View All Button -->
            <div class="mt-12 text-center">
                <a href="/project" class="inline-flex items-center px-6 py-3 rounded-xl text-base font-medium text-white bg-primary-600 hover:bg-primary-700 shadow-md hover:shadow-lg transition-all duration-200">
                    查看全部 {{ total_projects }} 个项目
                </a>
            </div>
        </div>
    </div>
    {% else %}
    <!-- Empty State -->
    <div class="bg-gray-50 dark:bg-gray-900 py-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div class="text-6xl text-gray-300 dark:text-gray-700 mb-6">
                <i class="fa-solid fa-folder-open"></i>
            </div>
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">暂无项目</h2>
            <p class="text-gray-500 dark:text-gray-400 mb-8">成为第一个创建项目的人吧！</p>
            {% if current_user.is_authenticated %}
            <a href="/group/my_group" class="inline-flex items-center px-6 py-3 rounded-xl text-base font-medium text-white bg-primary-600 hover:bg-primary-700">
                <i class="fa-solid fa-plus mr-2"></i> 创建项目
            </a>
            {% else %}
            <a href="/auth/register" class="inline-flex items-center px-6 py-3 rounded-xl text-base font-medium text-white bg-primary-600 hover:bg-primary-700">
                <i class="fa-solid fa-user-plus mr-2"></i> 注册账号
            </a>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <!-- Feature Cards -->
    <div class="bg-white dark:bg-gray-800 py-16 lg:py-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="relative p-8 rounded-2xl bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-100 dark:border-blue-800/30">
                    <div class="w-14 h-14 rounded-xl bg-blue-500 flex items-center justify-center text-white text-2xl mb-5">
                        <i class="fa-solid fa-users"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">组队协作</h3>
                    <p class="text-gray-600 dark:text-gray-400">创建工作组，邀请队友一起开发和管理项目</p>
                </div>
                
                <div class="relative p-8 rounded-2xl bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-100 dark:border-green-800/30">
                    <div class="w-14 h-14 rounded-xl bg-green-500 flex items-center justify-center text-white text-2xl mb-5">
                        <i class="fa-solid fa-terminal"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">在线终端</h3>
                    <p class="text-gray-600 dark:text-gray-400">浏览器内直接访问 Docker 容器，随时随地调试</p>
                </div>
                
                <div class="relative p-8 rounded-2xl bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-100 dark:border-purple-800/30">
                    <div class="w-14 h-14 rounded-xl bg-purple-500 flex items-center justify-center text-white text-2xl mb-5">
                        <i class="fa-solid fa-globe"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">一键部署</h3>
                    <p class="text-gray-600 dark:text-gray-400">项目上线后自动获得公网访问地址，轻松分享</p>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
